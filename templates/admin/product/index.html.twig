{% extends 'admin/layout/_squeleton_index.html.twig' %}

{% block dashboardTitle %}
	{{ 'products.manage'|trans }}
{% endblock %}

{% block title 'products'|trans %}

{% block actions %}
	<a href="{{ path(prefix ~ '_create') }}" class="btn btn-icon btn-primary d-md-none">
		{{ icon('plus') }}
	</a>
	{#<a href="{{ path(prefix ~ '_create') }}" data-target="addProduct" class="toggle btn btn-icon btn-primary d-md-none">
		{{ icon('plus') }}
	</a>#}
	<a href="{{ path(prefix ~ '_create') }}" class="btn btn-primary d-none d-md-inline-flex">
		{{ icon('plus') }}
		<span>{{ 'products.add'|trans }}</span>
	</a>
{% endblock %}

{% block content %}
	<div class="nk-block">
		<div class="nk-tb-list is-separate mb-3">
			<div class="nk-tb-item nk-tb-head">
				<div class="nk-tb-col nk-tb-col-check">
					<div class="custom-control custom-control-sm custom-checkbox notext">
						<input type="checkbox" class="custom-control-input" id="pid">
						<label class="custom-control-label" for="pid"></label>
					</div>
				</div>
				<div class="nk-tb-col{{ sorted(rows, 'row.name') ? ' focus' : '' }}">
					{{ sort_by(rows, 'Name'|trans, 'row.name') }}
				</div>
				<div class="nk-tb-col{{ sorted(rows, 'row.fixedPrice') ? ' focus' : '' }}">
					{{ sort_by(rows, 'fixed.price'|trans, 'row.fixedPrice') }}
				</div>
				<div class="nk-tb-col{{ sorted(rows, 'row.stockQuantity') ? ' focus' : '' }}">
					{{ sort_by(rows, 'Stock'|trans, 'row.stockQuantity') }}
				</div>
				<div class="nk-tb-col tb-col-sm">{{ 'shown'|trans }} ?</div>
				<div class="nk-tb-col tb-col-md">{{ icon('star', 'round', 'tb-asterisk') }}</div>
				<div class="nk-tb-col nk-tb-col-tools">{{ 'actions'|trans }}</div>
			</div>

			{% for product in rows %}
				{% set showLink = path(prefix ~ '_edit', {id: product.id}) %}
				{% set editLink = path(prefix ~ '_show', {id: product.id}) %}
				{% set deleteLink = path(prefix ~ '_delete', {id: product.id}) %}
				<div class="nk-tb-item">
					<div class="nk-tb-col nk-tb-col-check">
						<div class="custom-control custom-control-sm custom-checkbox notext">
							<input type="checkbox" class="custom-control-input" id="pid1">
							<label class="custom-control-label" for="pid1"></label>
						</div>
					</div>
					<div class="nk-tb-col">
						<span class="tb-product">
			                <img src="{{ product.thumbnailUrl }}" alt="" class="thumb">
			                <span class="title">{{ product.name }}</span>
			            </span>
					</div>
					<div class="nk-tb-col" style="text-align: right">
						<span class="tb-lead">{{ product.fixedPrice | format_currency('XOF', locale='fr') }}</span>
					</div>
					<div class="nk-tb-col">
						<span class="tb-lead">{{ product.stockQuantity }}</span>
					</div>
					<div class="nk-tb-col tb-col-sm">
						<div class="enable">
							<a style="margin-right: 50%" class="toggle-switch-button{{ product.visible ? ' active' : '' }}" href="#" data-product-id="{{ product.id }}"></a>
						</div>
					</div>
					<div class="nk-tb-col tb-col-md">
						<div class="asterisk tb-asterisk">
							<a href="#" data-product-id="{{ product.id }}" class="{{ product.isFavorite ? 'active' : '' }}">
								{{ icon('star', '', 'asterisk-off') }}
								{{ icon('star', 'fill', 'asterisk-on') }}
							</a>
						</div>
					</div>
					<div class="nk-tb-col nk-tb-col-tools">
						<ul class="nk-tb-actions gx-1 my-n1">
							<li class="me-n1">
								<div class="dropdown">
									<a href="#" class="dropdown-toggle btn btn-icon btn-trigger" data-bs-toggle="dropdown">{{ icon('more-h') }}</a>
									<div class="dropdown-menu dropdown-menu-end">
										<ul class="link-list-opt no-bdr">
											<li><a href="{{ editLink }}">{{ icon('edit') }}<span>{{ 'edit'|trans }}</span></a></li>
											<li><a href="{{ showLink }}">{{ icon('edit') }}<span>{{ 'view'|trans }}</span></a></li>
											<li><a href="#">{{ icon('activity-round') }}<span>{{ 'products.orders'|trans }}</span></a></li>
											<li><a href="{{ deleteLink }}">{{ icon('trash') }}<span>{{ 'remove'|trans }}</span></a></li>
										</ul>
									</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			{% endfor %}
		</div>

		{{ paginate(rows) }}
	</div>

	<div class="nk-add-product toggle-slide toggle-slide-right" data-content="addProduct" data-toggle-screen="any" data-toggle-overlay="true" data-toggle-body="true" data-simplebar>
		<div class="nk-block-head">
			<div class="nk-block-head-content">
				<h5 class="nk-block-title">New Product</h5>
				<div class="nk-block-des">
					<p>Add information and add new product.</p>
				</div>
			</div>
		</div><!-- .nk-block-head -->
		<div class="nk-block">
			<div class="row g-3">
				<div class="col-12">
					<div class="form-group">
						<label class="form-label" for="product-title">Product Title</label>
						<div class="form-control-wrap">
							<input type="text" class="form-control" id="product-title">
						</div>
					</div>
				</div>
				<div class="col-mb-6">
					<div class="form-group">
						<label class="form-label" for="regular-price">Regular Price</label>
						<div class="form-control-wrap">
							<input type="text" class="form-control" id="regular-price">
						</div>
					</div>
				</div>
				<div class="col-mb-6">
					<div class="form-group">
						<label class="form-label" for="sale-price">Sale Price</label>
						<div class="form-control-wrap">
							<input type="text" class="form-control" id="sale-price">
						</div>
					</div>
				</div>
				<div class="col-mb-6">
					<div class="form-group">
						<label class="form-label" for="stock">Stock</label>
						<div class="form-control-wrap">
							<input type="text" class="form-control" id="stock">
						</div>
					</div>
				</div>
				<div class="col-mb-6">
					<div class="form-group">
						<label class="form-label" for="SKU">SKU</label>
						<div class="form-control-wrap">
							<input type="text" class="form-control" id="SKU">
						</div>
					</div>
				</div>
				<div class="col-12">
					<div class="form-group">
						<label class="form-label" for="category">Category</label>
						<div class="form-control-wrap">
							<input type="text" class="form-control" id="category">
						</div>
					</div>
				</div>
				<div class="col-12">
					<div class="form-group">
						<label class="form-label" for="tags">Tags</label>
						<div class="form-control-wrap">
							<input type="text" class="form-control" id="tags">
						</div>
					</div>
				</div>
				<div class="col-12">
					<div class="upload-zone small bg-lighter my-2">
						<div class="dz-message">
							<span class="dz-message-text">Drag and drop file</span>
						</div>
					</div>
				</div>
				<div class="col-12">
					<button class="btn btn-primary">{{ icon('plus') }}<span>Add New</span></button>
				</div>
			</div>
		</div><!-- .nk-block -->
	</div>
{% endblock %}
